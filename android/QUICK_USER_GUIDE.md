# 🎮 DNF AI助手 - 5分钟快速上手

**一句话说明**：收集游戏截图 → 标注敌人/道具 → Colab训练模型 → 下载部署 → AI自动玩游戏

---

## 📱 第一步：收集&标注数据 (APP操作)

### 1. 启动收集
```
打开DNF游戏 → 打开APP → 点击"启动机器人"
```
- 自动截图300-500张（约30分钟）

### 2. 标注数据
```
APP → "数据收集" → "标注数据集"
```
- 框选：敌人、技能按钮、物品、门
- 至少标注200张（约2小时）

### 3. 上传数据
```
APP → "云端训练" → 输入名称 → "上传数据集"
```
- 记住数据集ID
- 等待上传完成（3-5分钟）

---

## 💻 第二步：云端训练 (Colab操作)

### 1. 打开Colab
- 电脑打开：`DNF_Training_Colab.ipynb`
- 上传到 https://colab.research.google.com

### 2. 修改配置
```python
# 第1个单元格
SUPABASE_URL = "https://lcvunitsbdpaltisybhn.supabase.co"
SUPABASE_KEY = "你的Key"
```

### 3. 运行训练
**点击"代码执行程序" → "全部运行"**

或者按顺序执行每个单元格：
- 单元格1: 安装依赖 (2分钟)
- 单元格2-3: 连接和查询 (10秒)
- 单元格4: 下载数据 (5-10分钟)
- 单元格5: 转换格式 (1分钟)
- 单元格6: **开始训练** ⏱️ 30-60分钟
- 单元格7: 转换TFLite (2分钟)
- 单元格8-9: 上传模型 (1分钟)

### 4. 等待完成
看到这个就成功了：
```
🎉 训练完成！
模型路径: models/xxxxx/model.tflite
准确率: 92.5%
```

---

## 📱 第三步：下载&使用 (APP操作)

### 1. 监控训练
```
APP → "云端训练"页面
```
- 实时显示训练进度
- 看到"✅ 训练完成"就可以下载了

### 2. 下载模型
```
点击"下载模型" → 点击"部署模型"
```
- 约1-2分钟

### 3. 开始使用
```
打开DNF游戏 → APP首页 → "启动机器人"
```
**AI会自动**：
- ✅ 识别敌人并攻击
- ✅ 拾取掉落物品
- ✅ 进入下一关
- ✅ 使用技能

---

## ⚡ 核心流程图

```
📱 APP: 收集数据 (30min)
     ↓
📱 APP: 标注数据 (2h)
     ↓
📱 APP: 上传数据 (5min)
     ↓
💻 Colab: 训练模型 (40min)  ← 这一步最重要！
     ↓
📱 APP: 下载模型 (2min)
     ↓
📱 APP: 部署模型 (10s)
     ↓
🎮 AI自动玩游戏！
```

---

## ❓ 3个最常见问题

### Q1: 上传后为什么没开始训练？
**A**: 需要你在Colab中手动运行训练脚本！APP只负责上传数据。

### Q2: 怎么知道训练完成了？
**A**:
- APP "云端训练"页面显示"✅ 训练完成"
- Colab最后输出"🎉 训练完成！"

### Q3: AI效果不好怎么办？
**A**:
1. 确保标注准确（边界框紧贴目标）
2. 增加训练数据（至少200张标注）
3. 提高训练轮数（改为100轮）

---

## 📊 关键数字

| 项目 | 最少 | 推荐 | 最佳 |
|-----|------|------|------|
| 收集截图 | 200张 | 500张 | 1000张+ |
| 标注图片 | 100张 | 200张 | 500张+ |
| 训练轮数 | 30轮 | 50轮 | 100轮 |
| 训练时间 | 20分钟 | 40分钟 | 60分钟 |
| 模型准确率 | >70% | >85% | >95% |

---

## 🎯 检查清单

**第一次使用前**：
- [ ] 已授予无障碍权限
- [ ] 已授予悬浮窗权限
- [ ] 已配置Supabase (local.properties)
- [ ] 有Google账号（Colab需要）

**训练前**：
- [ ] 至少收集200张截图
- [ ] 至少标注100张图片
- [ ] 每个类别至少20个实例
- [ ] 数据已上传到Supabase

**使用前**：
- [ ] 训练已完成（状态=completed）
- [ ] 模型已下载到手机
- [ ] 模型已部署（显示✅）
- [ ] DNF游戏已打开

---

## 🚀 下一步

**首次训练完成后**：
1. 测试AI效果
2. 记录问题（哪些识别不准）
3. 收集更多这类场景的数据
4. 重新标注和训练
5. 对比新旧模型效果

**迭代优化**：
```
v1模型 (准确率75%)
  → 发现问题：经常漏掉远处的敌人
  → 收集更多远景数据
  → 重新训练

v2模型 (准确率85%)
  → 发现问题：有时会误识别障碍物
  → 增加负样本标注
  → 重新训练

v3模型 (准确率92%)
  → 效果不错！继续使用
```

---

## 📝 备注

### 代码位置
- **检测器**: `app/src/main/java/com/gamebot/ai/detector/YoloDetector.kt`
- **AI服务**: `app/src/main/java/com/gamebot/ai/service/GameBotAccessibilityService.kt`
- **训练脚本**: `DNF_Training_Colab.ipynb`

### 日志查看
```bash
# 查看检测日志
adb logcat -s YoloDetector:I GameBotService:I

# 查看训练日志
# 在Colab中直接显示
```

### 模型管理
```
下载位置: /data/data/com.gamebot.ai/files/downloaded_model.tflite
部署位置: /data/data/com.gamebot.ai/files/models/dnf_detection_model.tflite
```

---

## 🎉 快速开始命令

**一键收集&标注**（手机操作）：
```
1. 启动机器人 → 玩30分钟游戏
2. 打开"数据收集" → 标注2小时
3. 打开"云端训练" → 上传数据集
```

**一键训练**（Colab操作）：
```python
# 点击"代码执行程序" → "全部运行"
# 等待40分钟
```

**一键部署**（手机操作）：
```
下载模型 → 部署模型 → 启动机器人
```

**完成！AI开始自动玩游戏** 🎮🤖

---

**详细教程**: 参见 `COMPLETE_WORKFLOW_GUIDE.md`
